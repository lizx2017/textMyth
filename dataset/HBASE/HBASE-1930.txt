Summary:
Put.setTimeStamp misleading (doesn't change timestamp on existing KeyValues, not copied in copy constructor)
Description:
In the process of migrating some code from 0.19, and was changing BatchUpdate's to Put's. I was hit by a bit of a gotcha. In the old code, I populated the BatchUpdate, then set the timestamp. However, this doesn't wotk for Put, because Put creates KeyValue's with the currently set timestamp when adding values. Setting the timestamp at the end has no effect. Also, the copy constructor doesn't copy the timestamp (or writeToWAL) setting.
One option would be to simply update the javadoc to make it clear that the timestamp needs to be set prior to adding values. I'm attaching a proposed patch which moves the timestamp setting to constructor only so that it isn't possible to trigger the confusing case at all.
Status:
CLOSED
Priority:
Minor
Resolution:
Fixed
Affects_version:
0.20.0, 0.20.1
Fix_version:
0.90.0
Component:
Client
Label:
None
Environment:

Attachment number:
0
Assignee:
Unassigned
Reporter:
Dave Latham
Create date:
22/Oct/09 20:39
Update date:
20/Nov/15 13:01
Resolved date:
23/Oct/09 20:00
