Summary:
Hybrid reference pdf still contain XRefStm info in the trailer dictionary afterPDDocument#save
Description:
Word2010.pdf is the input pdf, I open the document with PDFBOX add a string to the pdf. In this case ‘Hello world!’.
Afterwards I save the pdf.
If I look at the content of the pdf before and after I modified it (using Notepad++) I see this:
Word2010.pdf:
Line 647: <</Size 18/Root 1 0 R/Info 7 0 R/ID[<AE9AF29D5A22AE47B47C4DA29170BE64><AE9AF29D5A22AE47B47C4DA29170BE64>] /Prev 81972/XRefStm 81702>>
modified_Word2010.pdf:
Line 791: /XRefStm 81702
XRefStm is not updated although the original pdf had multiple revisions that were merged into a new pdf document.
A third party library we use defends on this XRefStm value and cannot open the pdf after it was modified. (Stack trace see previous msg)
Any help would be much appreciated.
Maruan:
that’s a bug.
Explanation: The original file uses what’s called a hybrid reference. That’s for compatibility with readers which do not support compressed reference streams. The file generated by PDFBox doesn’t use hybrid references any more but still contains the XRefStm info in the trailer dictionary.
See http://mail-archives.apache.org/mod_mbox/pdfbox-users/201403.mbox/%3C4425DF0D5759D64AA8845AA3EC444E1D014AE30AB3%40EXCHANGE03.unifiedpost.com%3E for more info.
Status:
CLOSED
Priority:
Major
Resolution:
Fixed
Affects_version:
1.8.7, 2.0.0
Fix_version:
1.8.8, 2.0.0
Component:
PDModel
Label:
None
Environment:

Attachment number:
0
Assignee:
Andreas Lehmkühler
Reporter:
Tim Costermans
Create date:
06/Apr/14 07:17
Update date:
13/Dec/14 14:15
Resolved date:
13/Oct/14 20:38
