Summary:
SegmentReader.doCommit should be sync'd; norms methods need not be sync'd
Description:
I fixed the failure in TestNRTThreads, but in the process tripped an assert because SegmentReader.doCommit isn't sync'd.
So I sync'd it, but I don't think the norms APIs need to be sync'd â€“ we populate norms up front and then never change them. Un-sync'ing them is important so that in the NRT case calling IW.commit doesn't block searches trying to pull norms.
Also some small code refactoring.
Status:
CLOSED
Priority:
Major
Resolution:
Fixed
Affects_version:
None
Fix_version:
3.2, 4.0-ALPHA
Component:
None
Label:
None
Environment:

Attachment number:
0
Assignee:
Michael McCandless
Reporter:
Michael McCandless
Create date:
12/Mar/11 23:05
Update date:
03/Jun/11 16:37
Resolved date:
05/May/11 23:28
